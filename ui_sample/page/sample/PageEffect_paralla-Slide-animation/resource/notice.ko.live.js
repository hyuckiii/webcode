/*
    ko. live. Update : 2016-11-04 09:43:37
*/
window.notiL10NData={Notifications:"알림",NotificationsSettings:"알림설정",NoNewNotifications:"새로운 알림이 없습니다.",LoginRequired:"로그인이 필요합니다.",PleaseRestart:"재실행을 해주세요",MyInfo:"내정보",Loading:"로딩중...",NoNewMessages:"새 쪽지가 없습니다.",ErrorOccurred:"오류가 발생하였습니다.",Maintenance:"임시점검 중입니다.",AvailableBnSWeb:"블레이드 & 소울 홈페이지에서 확인하실 수 있는 글입니다.",ReceivedRequests:"받은친구신청",AfewsecondsAgo:"방금 전",MinutesAgo:"분 전",HhoursAgo:"시간 전",DaysAgo:"일 전",AcceptedFriendRequest:"님의 친구 신청을 수락했습니다",Accept:"수락",Games:"게임",Apps:"앱",MobileApp:"모바일앱",MobileWeb:"모바일웹",Availableonthe:"PC웹",DesktopVersionOfTheWebsite:"에서 확인 가능한 내용입니다",DownloadIE11:"IE11 다운로드",DontShowAgainToday:"하루동안 보지 않기",IfInstallNCMessenger:"NC메신저를 설치하면",StartaPrivateChat:"님과 1:1 대화가 가능합니다.",TryOutNCMessenger:"NC메신저를 설치해 보세요.",TemporaryErrorOccurred:"일시적으로 오류가 발생했습니다.",FriendRequest:"친구신청\n 친구신청을 수락하였습니다.",UnableAddFriends:"최대 친구 수를 초과하여, 새로운 친구를 맺을 수 없습니다",InformationNotAvailable:"요청 정보가 없습니다.",ReceiveNotifications:"알림받기",ReceivePlayncNoti:"plaync에서 보내는 알림을 받습니다.",Year:"년",
Month:"월",Day:"일",NotiSettingsChanged:"알림 설정이 변경되었습니다.",AgreedToReceiveAdvertisements:"홍보성 알림 수신에 수신동의 하였습니다.",WithdrawnFromAgreementReceiveAdvertisements:"홍보성 알림 수신에 수신동의철회 하였습니다.",ProcessisDelayed:"작업이 지연되고 있습니다.\n다시 시도해 주세요",Youbecamefriends:"친구가 되었습니다.",NCFriendRequest:"NC친구 신청",AcceptedNCFriendRequest:"님의 <em>NC친구</em> 신청을 수락합니다.",BecomeNCFriends:"NC친구가 되면?",YouCanSeeAIONcharacterInfo:'<em>서로의 아이온 캐릭터</em>를 조회할 수 있습니다.<br />(단, <span class="nickname">닉네임</span>님이 비공개한 캐릭터는 확인하실 수 없습니다.)',ForLineageandLineage2:"리니지/리니지2의 경우 <em>신청/수락한 캐릭터만 조회</em>할 수 있습니다.",Yes:"예",No:"아니오",InstallNCMessenger:"NC 메신저 설치하기",AddFriends:"친구 추가",AcceptFriendRequest:"님의 친구 신청을 수락합니다.",BecomeFriends:"친구가 되면?",CanSeeEachothersAIONcharacterInfo:"<em>서로의 아이온 캐릭터</em>를 조회할 수 있습니다.",btn_confirm:"확인",btn_cancel:"취소",availableCheck:function(e,t,n,i){var o=[];return e&&o.push("게임"),t&&o.push("모바일앱"),n&&o.push("모바일웹"),i&&o.push("PC웹"),"'"+o.join(",")+"에서 확인 가능한 내용입니다.'"}},function(){"use strict";function e(){function e(e,s,a){
for(var r,c,d=[],l=0,u=s.length;l<u;l++){if(c=s[l],r=o[n.indexOf(c)]||t[c],"jquery"==c&&(r=t.jQuery),!r)throw new Error(c+" is not define!");d.push(r)}n.push(e),i.push(s),o.push(a.apply(t,d))}var n=[],i=[],o=[];return{define:e,names:n,depens:i,modules:o}}var t=function(){return this||(0,eval)("this")}();t.defineNs=t.defineNs||e}(),function(e,t){"use strict";var n=t("body"),i=t('<div id="dimmed" />').appendTo("body"),o=t(e.location.hash),s={keyboard:!0,backdrop:!0,scroll:!0,click:!0,effect:"fade"},a=function(e,n){this.options=t.extend({},s,n),this.$pane=e.addClass(this.options.effect).on("click",'[data-dismiss="modal"]',t.proxy(this.hide,this)).bind("webkitTransitionEnd",function(){t(this).focus().find("[data-autofocus]").focus()}),this.options.remote&&this.$pane.load(this.options.remote,function(){e.modal("show")})};a.prototype={backdrop:function(){return this.$backdrop=t('<div class="backdrop '+this.options.effect+'">').appendTo(i),this.options.click&&this.$backdrop.one("click",t.proxy(this.hide,this)),
this.$backdrop},toggle:function(){this.$pane.modal(this.isShown?"hide":"show")},show:function(){this.options.backdrop&&!this.isShown&&this.backdrop(),this.$pane.addClass("modal").attr("tabindex",-1).appendTo(i).show().css({marginTop:Math.floor(-this.$pane.outerHeight()/2),marginLeft:Math.floor(-this.$pane.outerWidth()/2)}).addClass("in"),this.$backdrop&&this.$backdrop.addClass("in"),this.esc(),!this.options.scroll&&this.setBodyOverflow("hidden"),this.isShown=!0},hide:function(){this.$pane.trigger(t.Event("hide.modal")),this.$pane.removeClass("in").hide(),this.$backdrop&&this.removeBackdrop(),this.esc(),!this.options.scroll&&this.setBodyOverflow(),this.isShown=!1},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},esc:function(){this.options.keyboard&&(this.isShown?n.unbind("keyup.modal"):n.bind("keyup.modal",t.proxy(function(e){27===e.which&&this.hide()},this)))},setBodyOverflow:function(e){e&&(this.cacheBodyCssOverflow=n.css("overflow")),n.css("overflow",e||this.cacheBodyCssOverflow);
}},"object"==typeof e.___modalConf&&t.extend(!0,s,e.___modalConf),t.fn.modal=function(e){return this.each(function(){var n=t(this),i=n.data("modal");!i&&n.data("modal",i=new a(n,e)),"string"==typeof e?i[e]():(!e||e&&!e.remote)&&i.show()})},n.on("click",'[data-ui="modal"]',function(e){var n=t(this),i=n.attr("href"),o=!/^#/.test(i),s=t(o?"<div />":i),a=t.extend(o?{remote:i}:{},n.data());s.modal(a).one("hide.modal",function(){n.focus()}),e.preventDefault()}),o.length&&o.hasClass("modal")&&o.modal()}(this,jQuery),function(e,t){function n(e){return new RegExp(e).test(o)}var i={},o=navigator.userAgent,s=n("iPhone")||n("iPod"),a=n("iPad"),r=n("Android"),c="",d=function(e){return"NC메신저를 설치하면\n"+e+"님과 1:1 대화가 가능합니다.\nNC메신저를 설치해 보세요."};i.excute=function(e,n){if(c=n,i.install(),s||a)location.href=e;else if(r){var o=t('<iframe src="'+e+'" width="0" height="0" frameborder="0" />');o.appendTo("body"),setTimeout(function(){o.remove()},1e3)}return!1},i.install=function(){var e=+new Date;setTimeout(function(){
+new Date-e<1500&&((s||a)&&confirm(d(c))&&(location.href="https://itunes.apple.com/kr/app/ncmesinjeo/id512119346"),r&&confirm(d(c))&&(location.href="market://details?id=com.ncsoft.android.apps.ncm"))},1e3)},e.AppLink=i}(this,jQuery),function(e,t){function n(e,n){this.pane=t(e),this.options=t.extend({},s,n||{}),this.onEnd=t.Callbacks(),this.customEvent="scroll.toLoad touchmove.toLoad",this.timeout=null,this.isOn=0,this.eventBindings()}function i(n){var i=n.data,s=t(this),a=s.height()+s.scrollTop(),r=(e!==this?this:o).scrollHeight;"function"==typeof i.options.except?exceptOuterHeight=i.options.except():"number"==typeof i.options.except?exceptOuterHeight=i.options.except:exceptOuterHeight=i.options.except.outerHeight()||0,r-=exceptOuterHeight,!i.isOn&&a>=r?(clearTimeout(i.timeout),i.timeout=setTimeout(function(){i.isOn++,i.onEnd.fireWith(i)},50)):a<=r&&(i.isOn=0)}var o=(t("html"),t("body")[0]),s={except:null};n.prototype.eventBindings=function(){this.pane.bind(this.customEvent,this,i)},n.prototype.clear=function(){
this.pane.unbind(this.customEvent)},e.ScrollToLoad=n}(this,jQuery);var noticePN=new defineNs;noticePN.define("notiThumbnail",[],function(){function e(){s={staticUrl:"https://"+(o?"w":i)+"static.plaync.co.kr/resource/noti/icon/",aionFile:"http://"+i+"gamepic.plaync.com/images/0301/"}}function t(e,t){if(o||"undefined"==typeof e||"undefined"==typeof t)return s.staticUrl+"aionprofile.jpg";var n=t.substring(t.length-4);return s.aionFile+e+"/"+n+"/"+t+".jpg"}function n(e){var n;return n=2==e.msgType?"3"==e.publisher.gameID?t(e.publisher.serverID,e.publisher.characterID):"4"==e.publisher.gameID?s.staticUrl+"l1profile.gif":"5"==e.publisher.gameID?s.staticUrl+"l2profile.gif":e.thumbnailUrl:e.thumbnailUrl}var i=/(rc.)/i.test(location.href)?"rc.":"",o="https:"==location.protocol&&location.href.indexOf("https:")>-1,s={};return e(),{factory:n}}),noticePN.define("notiLink",["jQuery"],function(e){function t(){s=window.npConf&&"true"==window.npConf.isApp,a=/(g.sandbox)/i.test(location.href),c=/(rc.)/i.test(location.href)?"rc.":"",
r=/(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|NC Noob)/i.test(navigator.userAgent.toLowerCase())}function n(t){var n="",c="";if(a?c=NP.st:(window.npConf&&(c=npConf.site),e("#nc-cnb").length>0&&window.userData&&(c=userData.site)),t.msgLink){var d;if(d=s?t.msgLink.mobileApp||t.msgLink.mobile:a?t.msgLink.ingame:r?t.msgLink.mobile:t.msgLink.web){if(s&&(d=i(d,"characterName",encodeURI(t.subscriber.characterName)||""),d=i(d,"serverId",t.subscriber.serverID||"")),d.indexOf("redirect")>0&&(d=i(d,"site",c)),!a&&("23002"==String(t.notiCode).substring(0,5)||"23001"==String(t.notiCode).substring(0,5)||"23003"==String(t.notiCode).substring(0,5))){var l=d.split("?");d=l[0]+"/"+c+"/timeline/wall?"+l[1]}a&&(d=o(d)),n='href="'+d+'"'}else if(!a||"bns"!=NP.st||"24013001"!=t.notiCode&&"24013002"!=t.notiCode&&"24013004"!=t.notiCode)if(!a||"aion"!=NP.st||"26016001"!=t.notiCode&&"26016002"!=t.notiCode&&"26016004"!=t.notiCode){var u=notiL10NData.availableCheck(t.msgLink.ingame,t.msgLink.mobileApp,t.msgLink.mobile,t.msgLink.web);
n=a?'onclick="modal.show({txt:'+u+'});"':'onclick="alert('+u+');"',t.msgLink.ingame||t.msgLink.mobileApp||t.msgLink.mobile||t.msgLink.web||(n="")}else"undefined"!=typeof AionObject&&"function"==typeof AionObject.OpenDialog&&(n="onclick=\"AionObject.OpenDialog('webpetitionlist');\"");else"undefined"!=typeof bns&&"function"==typeof bns.callback&&(n="onclick=\"bns.callback('nc://bns.Sns/OpenPetitionList');\"")}return n}function i(e,t,n){var i=e.indexOf("?")==-1?"?":"&";return e+i+t+"="+n}function o(e){return window.isTestServer&&isTestServer()&&a?"http://"+c+"tg."+e.substr(e.indexOf("sandbox.plaync.com")):e}var s,a,r,c="";return e(function(){t()}),{factory:n}}),noticePN.define("notiTemplate",["jQuery","notiLink","notiThumbnail"],function(e,t,n){function i(i){var o=t.factory(i),s=e(document.createElement("li"));i.isNew&&s.addClass("on"),s.data(i);var a='<div data-notiid="'+i.id+'"  data-isnew="'+i.isNew+'" class="wrapNotice'+(2==+i.msgType?" friendNt":"")+'">'+(2==+i.msgType?"":"<a "+o+">")+'<p class="noticeMsg">'+i.msg+'</p><div class="thumb"><img src="'+n.factory(i)+'" alt="'+i.publisher.nickname+'"></div><time pubdate="pubdate" class="noticeTime">'+c(i.createMillisec)+"</time>"+(2==+i.msgType?"":"</a>")+"</div>";
return 2==i.msgType&&(a+='<div class="wrapButton"><button class="button btAllow imgBtn btnAllow">수락</button>&nbsp;<button class="button btHidden imgBtn btnHide">숨기기</button></div>'),s.append(a),s}function o(e){return'<div class="wrapNoticeBox vAlign-middle wrap_nonedata"><p>'+e+"</p></div>"}function s(e){var t='<div class="wrapNotice"><a><p class="noticeMsg"><span class="gnbNtId"><span class="gnbNtNickname">'+e.publisher.nickname+'</span><span class="gnbNtCharacter">'+(e.publisher.characterName?"["+e.publisher.characterName+"-"+e.publisher.serverName+"]":"")+'</span></span>님의 친구 신청을 수락했습니다.</p><div class="thumb"><img src="'+e.thumbnailUrl+'" alt="'+e.publisher.nickname+'" onerror="this.src='+e.onErrorUrl+'"></div><time pubdate="pubdate" class="noticeTime">&#48169;&#44552;&#32;&#51204;</time></a></div><div class="tooltipMsg" style="display:none">친구가 되었습니다.</div>';return t}function a(e){var t='<div id="friendAgree_M"><section class="modalRelateFriend"><button class="btnCloseLayer js_close">닫기</button><div class="wrapCont"><dl><dt>NC친구가 되면?</dt><dd>서로의 B&S, 아이온 캐릭터를 조회할 수 있습니다.<br /><em>(단, <span class="nickname">닉네임</span>님이 비공개한 캐릭터는 조회 불가)</em></dd></dl><p class="js_udo"><span class="nickname">'+e+'</span>님의 <em>NC친구</em> 신청을<br> 수락하시겠습니까?</p></div><div class="wrapBtns js_udo"><button class="yes">예</button><button class="no">아니오</button></div></section></div>';
return t}function r(e){var t='<div id="friendAgree_I" class="wrapLayer modalAgreeFriend"><section class="msgLayer"><header><h1>친구 추가</h1></header><section><p><strong class="username">'+e+'</strong>님의 친구 신청을 수락합니다.</p><dl><dt>친구가 되면?</dt><dd><em>서로의 아이온 캐릭터</em>를 조회할 수 있습니다.</dd><dd>리니지/리니지2의 경우 <em>신청/수락한 캐릭터만 조회</em>할 수 있습니다.</dd></dl><menu><button class="yesAgree">예, 친구 신청을 수락하겠습니다.</button><br><button class="noAgree js_close">아니오, 친구 신청을 수락하지 않겠습니다.</button></menu></section><div class="button"><button class="js_close">닫기</button></div></section></div>';return t}function c(e){var t,n=parseInt(e),i=new Date(n),o=parseInt((l-n)/1e3);return o<60?t=notiL10NData.AfewsecondsAgo:o>=60&&o<3600?t=parseInt(o/60)+notiL10NData.MinutesAgo:o>=3600&&o<86400?t=parseInt(o/3600)+notiL10NData.HhoursAgo:o>=86400&&o<604800?t=parseInt(o/86400)+notiL10NData.DaysAgo:o>=604800&&(t=i.getFullYear()+"."+(i.getMonth()+1)+"."+i.getDate()),t}function d(e){l=e}var l,u='<div class="loading">'+notiL10NData.Loading+"</div>";
return{tmpMsg:i,tmpLoading:u,tmpNoMsg:o,tmpOkFriend:s,setCurrentTime:d,friendAgree_M:a,friendAgree_I:r}}),noticePN.define("notice",["jQuery","notiTemplate","ScrollToLoad"],function(e,t,n){function i(){p=/(rc\.)/i.test(location.href)?"rc.":"",p=/(rc\-)/i.test(location.href)?"rc-":p,h=window.npConf&&"true"==window.npConf.isApp,f=/(g\.sandbox)/i.test(location.href),window.userData&&window.userData.locale&&(w=window.userData.locale);var n=/(asia\.nc\.com)/i.test(location.href)?"asia.nc.com":"noti.plaync.com";u={count:location.protocol+"//"+p+n+"/noti/api/common/count.jsonp",list:location.protocol+"//"+p+n+"/noti/api/common/list.jsonp",confirm:location.protocol+"//"+p+n+"/noti/api/common/confirm.jsonp"},e("#notiList").append(e(document.createElement("ul"))),N=e("#notiList ul"),N.after(t.tmpLoading),d=e(".loading"),s()}function o(){if(!m){b++;var n=e.ajax({url:u.list,dataType:"jsonp",type:"GET",data:{targetCategory:"GNB_NOTI",pageSize:y,pageNo:b,language:w},beforeSend:function(){m=!0,d.show();
},complete:function(e,t){m=!1,d.hide()}});n.done(a),n.fail(function(e,n){m=!1,d.hide(),N.append(t.tmpNoMsg(notiL10NData.ErrorOccurred))})}}function s(){N.on("click",".wrapNotice",function(t){var n=e(this).data("notiid");e(this).data("isnew")&&e.ajax({url:u.confirm,dataType:"jsonp",type:"GET",data:{notiID:n},success:function(){},beforeSend:function(){},complete:function(){},error:function(){}})})}function a(n){if(f&&NP.Pushs.contentsLoaded(),"0"===n.result.returnCode)if(n.result.notiResult.totalCount<=0)v=0,b=0,e(".wrapNoticeBox").remove(),N.after(t.tmpNoMsg(notiL10NData.NoNewNotifications));else{g&&(v=Math.floor((n.result.notiResult.totalCount-1)/y)+1,g=!1),t.setCurrentTime(n.result.notiResult.serverMillisec);for(var i,o=0,s=n.result.notiResult.notiList.length;o<s;o++)i=t.tmpMsg(n.result.notiResult.notiList[o]),N.append(i),r(i,n.result.notiResult.notiList[o])}else{var a;a="401"==n.result.returnCode?notiL10NData.LoginRequired:"999"==n.result.returnCode?notiL10NData.Maintenance:notiL10NData.ErrorOccurred,
N.append(t.tmpNoMsg(a))}}function r(t,n){var i=e(t).find(".thumb img");e(i).on("error",function(){e(this).attr("src",n.onErrorUrl)})}function c(e){N.empty(),N.append(t.tmpNoMsg(notiL10NData.Maintenance))}var d,l={},u={},p="",f="",h=!1,m=!1,g=!0,b=0,v=1,y=20,N={},w="ko-KR";return window.gnbNtError=c,e(function(){if(e("#nc-cnb").length<1){if(e(".noticeList, #notiList").length<1)return;i(),o()}else{i();var t=function(){return this||(0,eval)("this")}();t.ncNotice={start:function(){g=!0,v=0,b=0,N.empty(),o()}}}}),l}),noticePN.define("notiFriends",["jQuery","notiTemplate"],function(e,t){function n(){d=/(rc.)/i.test(location.href)?"rc.":"",l=window.npConf&&"true"==window.npConf.isApp,u=/(g.sandbox)/i.test(location.href);var t=/(asia\.nc\.com)/i.test(location.href)?"asia.nc.com":"noti.plaync.com";c={deleteNoti:"http://"+d+t+"/noti/api/common/delete.jsonp",accept:"http://"+d+"sandbox.plaync.com/$!/my/friend/propose/accept.jsonp",FriendAgree:"http://"+d+"sandbox.plaync.com/$!/my/profile/updateAgreeFriendAccept.jsonp",
hide:function(e,t){var n=u?"":"http://"+d+"sandbox.plaync.com";return n+"/$!/bns/friend/"+e+"/"+t+"/propose/hide.jsonp"}},f=e("#notiList ul"),f.on("click",".wrapButton .btAllow",function(t){h=e(this).parents("li").eq(0),m=e(h).data().publisher.id,g=e(h).data().proposalId,i()}),f.on("click",".wrapButton .btHidden",function(t){h=e(this).parents("li").eq(0),m=e(h).data().publisher.id,g=e(h).data().proposalId,e.ajax({url:c.hide(m,g),dataType:"jsonp",type:"GET",data:"",success:function(t){e(h).hide(),"SUCCESS"==t.result},error:function(){r(notiL10NData.ErrorOccurred)},beforeSend:function(){},complete:function(){}}),e.ajax({url:c.deleteNoti,dataType:"jsonp",type:"GET",data:{notiID:e(h).data().id,targetCategory:"GNB_NOTI"},success:function(t){e(h).hide(),"SUCCESS"==t.result.returnMessage},error:function(){r(notiL10NData.ErrorOccurred)},beforeSend:function(){},complete:function(){}})})}function i(){p||e.ajax({url:c.accept,data:{friendId:m,proposalId:g},dataType:"jsonp",type:"GET",success:o,beforeSend:function(){
p=!0},complete:function(){p=!1},error:function(){}})}function o(n){if("SUCCESS"==n.result||"4006"==n.result){e(h).empty();var i=t.tmpOkFriend(e(h).data());if(e(h).append(i),u){var o=e(h).find(".tooltipMsg");o.attr("style","right:0px; opacity:0;"),o.animate({right:22,opacity:1},300)}else alert(notiL10NData.FriendRequest)}else"NO_AGREEMENT_FRIEND_ACCEPT"==n.result?s():r("4015"==n.result||"4016"==n.result?notiL10NData.UnableAddFriends:"4000"==n.result?notiL10NData.InformationNotAvailable:notiL10NData.ErrorOccurred)}function s(n){var i=n?n:e(h).data().publisher.nickname;u?(e("#friendAgree_I").length?modal.show(e("#friendAgree_I")):(e("#container").append(t.friendAgree_I(i)),modal.show(e("#friendAgree_I"))),e("#friendAgree_I").on("click",".yesAgree",function(t){modal.hide(),e.ajax({url:c.FriendAgree,success:a,dataType:"jsonp",type:"GET"})})):(e("#friendAgree_M").length?e(e("#friendAgree_M")).modal({click:!1,keyboard:!1}):e(t.friendAgree_M(i)).modal({click:!1,keyboard:!1}),e("#friendAgree_M").on("click",".yes",function(t){
e("#friendAgree_M").modal("hide"),e("body").css("overflow","auto"),e.ajax({url:c.FriendAgree,success:a,dataType:"jsonp",type:"GET"})}),e("#friendAgree_M").on("click",".no",function(t){e("#friendAgree_M").modal("hide"),e("body").css("overflow","auto")}),e("#friendAgree_M").on("click",".js_close",function(t){e("#friendAgree_M").modal("hide"),e("body").css("overflow","auto")}),e("#friendAgree_M").on("click",".btnNcMsn",function(t){l?location.href="ncm://message?guid="+m:AppLink.excute("ncm://message?guid="+m,e(h).data().publisher.nickname)}))}function a(e){"SUCCESS"==e.result?setTimeout(function(){i()},150):r(notiL10NData.ErrorOccurred)}function r(e){u?modal.show({txt:e}):alert(e)}var c={},d="",l=!1,u=!1,p=!1,f={},h={},m="",g="";return e(function(){e(".noticeList, #notiList").length<1||n()}),{friendAgreePop:s}});