<!doctype html>
<html lang="ko"> <!-- 한국어 -->
<!-- <html lang="en"> 영어 -->
<!-- <html lang="ja"> 일본어 -->
<!-- <html lang="th"> 태국어 -->
<!-- <html lang="zh-Hans"> 중국어(간체) -->
<!-- <html lang="zh-Hant"> 중국어(번체) -->
<head>
<title>MonsterSuperLeague - Dragon Dungeon Open Event!</title>
<meta charset="utf-8">
<meta name="viewport" content="width=980">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="http://static.four33.co.kr/event/game/monstersl/ingame/161013_dragon/css/style.css">
<script src="http://static.four33.co.kr/event/common/js/jquery-1.8.1.min.js"></script>
</head>
<!--
  언어에 따라 #fwrap에 class추가
    - ko(한국어)
    - en(영어)
    - ja(일본어)
    - th(태국어)
    - zh-CN(중국어 - 간체)
    - zh-TW(중국어 - 번체)
-->
<body>
<div id="fWrap" class="ko">

  <div id="header"></div>
  <!-- // #header -->

  <div id="container">

    <div id="questStep">

      <div class="quest_list1">
        <ul>
          <li quest-num="1">
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li quest-num="1">
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
        </ul>
      </div>
      <!-- // .quest_list1(드래곤 던전) -->

      <div class="quest_list2">
        <span class="icon"></span>
        <ul>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
        </ul>
      </div>
      <!-- // .quest_list2(시나리오) -->

      <div class="quest_list3">
        <span class="icon"></span>
        <ul>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
        </ul>
      </div>
      <!-- // .quest_list3(스타몬리그) -->

      <div class="quest_list4">
        <ul>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
          <li>
            <div class="wrap_list">
              <div class="wrap_title"><div class="quest-title"></div></div>
              <div class="wrap_status">
                ( <span class="ing"></span> / <span class="max"></span> )
              </div>
              <div class="wrap_reward"><div class="reward-title"></div></div>
              <div class="wrap_btn"><div class="btn"></div></div>
            </div>
          </li>
        </ul>
      </div>
      <!-- .quest_list4(고대골렘 던전) -->
    </div>
    <!-- // #questStep -->

    <div id="questNormal">
      <span class="icon"></span>
      <ul>
        <li>
          <div class="wrap_list">
            <div class="wrap_title"><div class="quest-title"></div></div>
            <div class="wrap_status">
              ( <span class="ing"></span> / <span class="max"></span> )
            </div>
            <div class="wrap_reward"><div class="reward-title"></div></div>
            <div class="wrap_btn"><div class="btn"></div></div>
          </div>
        </li>
        <li>
          <div class="wrap_list">
            <div class="wrap_title"><div class="quest-title"></div></div>
            <div class="wrap_status">
              ( <span class="ing"></span> / <span class="max"></span> )
            </div>
            <div class="wrap_reward"><div class="reward-title"></div></div>
            <div class="wrap_btn"><div class="btn"></div></div>
          </div>
        </li>
        <li>
          <div class="wrap_list">
            <div class="wrap_title"><div class="quest-title"></div></div>
            <div class="wrap_status">
              ( <span class="ing"></span> / <span class="max"></span> )
            </div>
            <div class="wrap_reward"><div class="reward-title"></div></div>
            <div class="wrap_btn"><div class="btn"></div></div>
          </div>
        </li>
        <li>
          <div class="wrap_list">
            <div class="wrap_title"><div class="quest-title"></div></div>
            <div class="wrap_status">
              ( <span class="ing"></span> / <span class="max"></span> )
            </div>
            <div class="wrap_reward"><div class="reward-title"></div></div>
            <div class="wrap_btn"><div class="btn"></div></div>
          </div>
        </li>
      </ul>
    </div>
    <!-- // #questNormal(성장) -->

  </div>
  <!-- // #content -->

  <div id="footer"></div>
  <!-- // #footer -->

  <!-- 확인 후 삭제해주세요 -->
  <div class="test">
    <button class="lang_ko" type="button" lang-data="ko">한국어</button>
    <button class="lang_en" type="button" lang-data="en">영어</button>
    <button class="lang_ja" type="button" lang-data="ja">일본어</button>
    <button class="lang_th" type="button" lang-data="th">태국어</button>
    <button class="lang_zh-CN" type="button" lang-data="zh-CN">중국어 - 간체</button>
    <button class="lang_zh-TW" type="button" lang-data="zh-TW">중국어 - 번체</button>
  </div>
  <!-- // 확인 후 삭제해주세요 -->

</div>
<!-- // #fWrap -->


<script type="text/javascript" src="http://static.four33.co.kr/event/common/js/webevent/ftt.modalLayer.0.2.js"></script>
<script type="text/javascript" src="http://static.four33.co.kr/event/game/monstersl/ingame/161013_dragon/js/evLang.js"></script>
<script type="text/javascript" src="http://static.four33.co.kr/event/game/monstersl/ingame/161013_dragon/js/commonLang.js"></script>
<script type="text/javascript">
var evStepStatus = [     // (0/1/2/3)
    [3, 3, 2, 1],        // 드래곤 던전
    [3, 3, 2, 1],        // 시나리오
    [3, 3, 2, 1],        // 스타몬리그
    [3, 3, 2, 1]         // 고대골렘 던전
  ],
  evStepIng = [
    [0, 0, 0, 0],
    [0, 0, 0, 0],
    [0, 0, 0, 0],
    [0, 0, 0, 0]
  ],
  evStepMax = [
    [1, 2, 3, 4],
    [50, 100, 300, 500],
    [30, 50, 100, 300],
    [30, 50, 100, 300]
  ],
  evNormalStatus = [3, 3, 2, 1],  // 성장(0/1/2)
  evNormalIng = [0, 0, 0, 0],
  evNormalMax = [500, 100, 10, 10],
  langLayout = evLang($('#fWrap').attr('class')),                  // 이벤트 사용언어
  langLayer = commonLang($('#fWrap').attr('class')),               // 공통사용(레이어) 언어
  layoutSet = function(data) {
  //status Set1
  $(data.questStatus1).each(function (i) {
    $(data.questStatus1[i]).each(function (j) {
      var target = $('#fWrap #questStep ul').eq(i).find('li').eq(j),
      targetIng = $(target).find('.wrap_status .ing'),
      targetMax = $(target).find('.wrap_status .max'),
      statusVal = data.questStatus1[i][j],
      statusName = ['normal', 'select', 'ready', 'end']
      questIng = data.questIng1[i][j],
      questMax = data.questMax1[i][j];

      $(target).attr('class',statusName[statusVal]);
      $(targetIng).html(questIng);
      $(targetMax).html(questMax);
    });
  });

//status Set2
  $(data.questStatus2).each(function (i) {
    var target = $('#fWrap #questNormal ul').find('li').eq(i),
    targetIng = $(target).find('.wrap_status .ing'),
    targetMax = $(target).find('.wrap_status .max'),
    statusVal = data.questStatus2[i],
    statusName = ['', 'ready', 'end']
    questIng = data.questIng2[i],
    questMax = data.questMax2[i];

    $(target).attr('class', statusName[statusVal]);
    $(targetIng).html(questIng);
    $(targetMax).html(questMax);
  });

  // langSet
  $('#fWrap #container ul li').each(function (i, ele) {
    var questTit = $(ele).find('.quest-title'),
    rewardTit = $(ele).find('.reward-title'),
    langQuestTit = data.langSet.questTitle[i],
    langRewardTit = data.langSet.rewardTitle[i];

    $(questTit).html(langQuestTit);
    $(rewardTit).html(langRewardTit);
  });

  // btnSet
  $('#fWrap #container ul li .wrap_btn .btn').html(data.langSet.btnName);

  //eventInfo
  $('#fWrap #footer').html(data.langSet.eventInfo);
};

// 초기 실행
layoutSet({
  questStatus1: evStepStatus,
  questStatus2: evNormalStatus,
  questIng1: evStepIng,
  questIng2: evNormalIng,
  questMax1: evStepMax,
  questMax2: evNormalMax,
  langSet: langLayout
});


// 보상수령
$('#container').on('click','li.ready .btn',function () {
  var questNum = $(this).parent('div').parent('div').parent('li').attr('quest-num'),   // quest-num 속성 값
    isDisabled = $(this).hasClass('disabled');

  console.log(questNum);

  if (!isDisabled) {
    // 미션 상태 값 변경
    evStepStatus = [
      [3, 3, 3, 3],        // 드래곤 던전(0/1/2/3)
      [3, 3, 3, 3],        // 시나리오
      [3, 3, 3, 3],        // 스타몬리그
      [3, 3, 3, 3]         // 고대골렘 던전
    ];
    evNormalStatus = [2, 2, 2, 2];  // 성장(0/1/2)

    // btnLock
    $(this).addClass('diasbled');

    // 레이어 출력
    if (questNum == 0){
      /*
        [messageList]
         success(정상지급)
         end(이벤트 기간 종료)
         denied(아이템 지급 미대상자)
         fail(지급실패)
         error(비정상접근)
         btnName(확인버튼명)
         (str로 입력해서 처리도 가능)

         EX>
         modalLayer.openLayer('str로 입력도 가능합니다.<br>(<b style="font-weight:bold">html</b>도 사용가능)', langLayer);
         modalLayer.openLayer('fail', langLayer, 'refresh');  // 새로고침이 필요한 경우
       */
      //modalLayer.openLayer('str로 입력도 가능합니다.<br>(<b style="font-weight:bold">html</b>도 사용가능)', langLayer);
      modalLayer.openLayer('success', 'refresh', langLayer);  // openLayer
    }else if (questNum == 1){
      modalLayer.openLayer('fail', 'normal', langLayer);  // openLayer
    }else{
      modalLayer.openLayer('success', 'refresh', langLayer);  // openLayer
      //modalLayer.openLayer('error', 'refresh', langLayer);
    }
    // 초기 실행
    layoutSet({
      questStatus1: evStepStatus,
      questStatus2: evNormalStatus,
      questIng1: evStepIng,
      questIng2: evNormalIng,
      questMax1: evStepMax,
      questMax2: evNormalMax,
      langSet: langLayout
    });
    $('#fWrap li .btn').removeClass('diasbled');
  }
})

// test
$('.test button').bind('click', function () {
  var langType = $(this).attr('lang-data');
  langLayout = evLang(langType);
  langLayer = commonLang(langType);


  $('.test button').removeClass('active');
  $(this).addClass('active');
  $('#fWrap').attr('class', langType);
  layoutSet({
    questStatus1: evStepStatus,
    questStatus2: evNormalStatus,
    questIng1: evStepIng,
    questIng2: evNormalIng,
    questMax1: evStepMax,
    questMax2: evNormalMax,
    questStep: ['hide', 'select', 'ready', 'end'],
    langSet: langLayout,
    btnName: langLayout.btnName,
    eventInfo: langLayout.eventInfo
  })
});

</script>

</body>

</html>