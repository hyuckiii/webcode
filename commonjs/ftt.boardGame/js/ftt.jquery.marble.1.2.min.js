(function(){var a={defaultOps:{diceSet:6,pauseStart:500,pauseMove:500,mapSet:null,diceStatus:0,onStart:function(){return true},onMove:function(){return true},onAfter:function(){return true}},move:function(c,b,f,g,e,d){if(c>0){setTimeout(function(){b++;if(b==g){b=0}$(f).removeClass("active").eq(b).addClass("active");a.defaultOps.diceStatus--;a.move(a.defaultOps.diceStatus,b,f,g,e,d)},e.pauseMove)}else{e.onAfter(d);$(e.target).removeClass("disable")}}};$.fn.Boardgame=function(i,h,j,e){a.defaultOps.target=$(this);data=$.extend({},a.defaultOps,i);var c=$(data.target).find(".map"),n=$(data.target).find(".map.active"),e=(e!=undefined)?parseInt(e):Math.floor((Math.random()*data.diceSet)+1),k=parseInt($(n).attr("data-step")),m=k,l=k+e,b=$(c).eq(l).attr("data-event"),f=$(c).eq(l).attr("data-reward"),d=$(c).length,g;if($(data.target).hasClass("disable")){return"진행 중 입니다."}if(data.mapSet!=null){if(data.mapSet>=0&&data.mapSet<d){$(c).removeClass("active").eq(data.mapSet).addClass("active")}return false}a.defaultOps.diceStatus=e;j++;if(l>=d){l=l-(d);h++}if(b==undefined){b="normal"}g={diceScore:e,startPos:k,arrivePos:l,loopNum:h,diceCount:j,typeMap:b,reward:f};data.onStart(g);setTimeout(function(){data.onMove(g);a.move(a.defaultOps.diceStatus,m,c,d,data,g)},data.pauseStart);$(data.target).addClass("disable");return g}})(jQuery);