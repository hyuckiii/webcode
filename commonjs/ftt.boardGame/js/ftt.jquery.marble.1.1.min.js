(function(){var a={defaultOps:{diceSet:6,pauseStart:500,pauseMove:500,mapSet:null,diceStatus:0,onStart:function(){return true},onMove:function(){return true},onAfter:function(){return true}},move:function(c,b,f,g,e,d){if(c>0){setTimeout(function(){b++;if(b==g){b=0}$(f).removeClass("active").eq(b).addClass("active");a.defaultOps.diceStatus--;a.move(a.defaultOps.diceStatus,b,f,g,e,d)},e.pauseMove)}else{e.onAfter(d);$(e.target).removeClass("disable")}}};$.fn.Boardgame=function(h,g,i,e){a.defaultOps.target=$(this);data=$.extend({},a.defaultOps,h);var c=$(data.target).find(".map"),m=$(data.target).find(".map.active"),e=(e!=undefined)?e:Math.floor((Math.random()*data.diceSet)+1),j=parseInt($(m).attr("data-step")),l=j,k=j+e,b=$(c).eq(k).attr("data-event"),d=$(c).length,f;if($(data.target).hasClass("disable")){return"진행 중 입니다."}if(data.mapSet!=null){if(data.mapSet>=0&&data.mapSet<d){$(c).removeClass("active").eq(data.mapSet).addClass("active")}return false}a.defaultOps.diceStatus=e;i++;if(k>=d){k=k-(d);g++}if(b==undefined){b="normal"}f={diceScore:e,startPos:j,arrivePos:k,loopNum:g,diceCount:i,typeMap:b};data.onStart(f);setTimeout(function(){data.onMove(f);a.move(a.defaultOps.diceStatus,l,c,d,data,f)},data.pauseStart);$(data.target).addClass("disable");return f}})(jQuery);