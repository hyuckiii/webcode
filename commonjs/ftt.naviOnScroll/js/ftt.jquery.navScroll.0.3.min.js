(function(){$.fn.navPos=function(b){var d,c={target:$(this),menuList:$(this).children("ul").children("li"),menuBtn:$(this).children("ul").children("li").children("a"),menuNum:$(this).children("ul").children("li").children("a").length,menuHeight:$(this).height(),menuClass:"step",detailPos:0,aniDuration:600,aniEase:"swing",evDelay:0},b=b;b=$.extend({},c,b);function a(k,l){var h=$(window).scrollTop();if($("html, body").is(":animated")==0){if(k=="click"){var j=$(b.menuList).eq(l).find("a"),n=$(j).attr("href");$("body").addClass("ing");$(b.menuBtn).removeClass("active");$(j).addClass("active");$(b.target).attr("class","").addClass(b.menuClass+(l+1));$("html, body").animate({scrollTop:$(n).offset().top-b.menuHeight+b.detailPos},b.aniDuration,b.aniEase,function(){setTimeout(function(){$("body").removeClass("ing")},100)});return false}else{for(var g=0;g<b.menuNum;g++){var e=$(b.target).find("li:eq("+g+") a"),m=$(b.target).find("li:eq(0) a").attr("href"),j=$(e).attr("href"),f;if(g==b.menuNum-1){f=$(b.target).find("li:eq("+g+") a").attr("href")}else{f=$(b.target).find("li:eq("+(g+1)+") a").attr("href")}m=$(m).offset().top-b.menuHeight+b.detailPos;j=$(j).offset().top-b.menuHeight+b.detailPos;f=$(f).offset().top-b.menuHeight+b.detailPos;$(b.menuBtn).removeClass("active");$(b.target).attr("class","");if(h<m){}else{if(j==f||$(window).scrollTop()>=($(document).height()-$(window).height())){$(b.menuBtn).removeClass("active");$(b.target).find("li:eq("+(b.menuNum-1)+") a").addClass("active");$(b.target).attr("class","").addClass(b.menuClass+(b.menuNum))}else{if((j<=h)&&(h<f)){$(b.target).find("ul > li:eq("+g+") a").addClass("active");$(b.target).addClass(b.menuClass+(g+1));return false}}}}}}}$(document).ready(function(){$(b.menuBtn).bind("click",function(){var e=$(this).parent("li").index();a("click",e);return false});$(window).on("scroll resize",function(){var e=$("body").hasClass("ing");if(!e){if(d){window.clearTimeout(d)}d=setTimeout(function(){a()},c.evDelay)}})})}})(jQuery);